!function(r){"use strict";r(document).ready(function(){t.init()});var t={importData:{},allowPopupClosing:!0,init:function(){var n=this;this.categoriesFilter(),r(".century-toolkit-search-input").on("keyup",function(){0<r(this).val().length?(r(".century-toolkit-demo-wrap .themes").find(".theme-wrap").hide(),r(".century-toolkit-demo-wrap .themes").find('.theme-wrap[data-name*="'+r(this).val().toLowerCase()+'"]').show()):r(".century-toolkit-demo-wrap .themes").find(".theme-wrap").show()}),r(".century-toolkit-demo-wrap .theme-actions a.button").on("click",function(t){t.stopPropagation()}),r(".century-toolkit-open-popup").click(function(t){t.preventDefault();var e=r(this).data("demo-id"),o=r(".preview-"+e),i=r(".preview-all-"+e);o.show(),i.show(),n.getDemoData(e)}),r(document).on("click",".install-now",this.installNow),r(document).on("click",".activate-now",this.activatePlugins),r(document).on("wp-plugin-install-success",this.installSuccess),r(document).on("wp-plugin-installing",this.pluginInstalling),r(document).on("wp-plugin-install-error",this.installError)},categoriesFilter:function(){var i=r(".century-toolkit-demo-wrap .themes").find(".theme-wrap"),o="century-toolkit-is-fadeout",n=function(t){var e=r.Deferred();return function(){var t=r.Deferred();return i.addClass(o),setTimeout(function(){i.removeClass(o).hide(),t.resolve()},200),t.promise()}().done(function(){!function(t,e){var o=t?'[data-categories*="'+t+'"]':"div";"all"===t&&(o="div"),i.filter(o).show().addClass("century-toolkit-is-fadein"),setTimeout(function(){i.removeClass("century-toolkit-is-fadein"),e.resolve()},200)}(t,e)}),e};r(".century-toolkit-navigation-link").on("click",function(t){t.preventDefault(),r(this).parent().siblings().removeClass("active"),r(this).parent().addClass("active");var e=this.hash.slice(1),o=r(".century-toolkit-demo-wrap .themes");o.css("min-width",o.outerHeight()),n(e).done(function(){o.removeAttr("style")})})},getDemoData:function(i){var n=this;r.ajax({type:"get",url:CenturyToolKitDemos.ajaxurl,data:{demo_name:i,action:"century_toolkit_ajax_get_import_data",security:CenturyToolKitDemos.century_toolkit_import_data_nonce},complete:function(t){n.importData=r.parseJSON(t.responseText)}}),r.ajax({url:CenturyToolKitDemos.ajaxurl,type:"get",data:{action:"century_toolkit_ajax_get_demo_data",demo_name:i,demo_data_nonce:CenturyToolKitDemos.demo_data_nonce},complete:function(t){n.runPopup(t);var e=r(".preview-"+i),o=r(".preview-all-"+i);e.hide(),o.hide()}})},runPopup:function(t){var n=this,e=r("html").innerWidth();r("html").css("overflow","hidden");var o=r("html").innerWidth();r("html").css("margin-right",o-e),r("#century-toolkit-demo-popup-wrap").fadeIn(),r(t.responseText).appendTo(r("#century-toolkit-demo-popup-content")),r(".century-toolkit-demo-popup-close, .century-toolkit-demo-popup-overlay").on("click",function(t){t.preventDefault(),!0===n.allowPopupClosing&&n.closePopup()}),r(".century-toolkit-plugins-next").on("click",function(t){t.preventDefault(),r("#century-toolkit-demo-plugins").hide(),r("#century-toolkit-demo-import-form").show()}),r("#century-toolkit-demo-import-form").submit(function(t){t.preventDefault();var e=r(this).find('[name="century_toolkit_import_demo"]').val(),o=r(this).find('[name="century_toolkit_import_demo_data_nonce"]').val(),i=[];r(this).find('input[type="checkbox"]').each(function(){!0===r(this).is(":checked")&&i.push(r(this).attr("name"))}),r(this).hide(),r(".century-toolkit-loader").show(),n.importContent({demo:e,nonce:o,contentToImport:i,isXML:r("#century_toolkit_import_xml").is(":checked")})})},importContent:function(a){var t,s,l=this,e=(Date.now(),{century_toolkit_import_demo:a.demo,century_toolkit_import_demo_data_nonce:a.nonce});if(this.allowPopupClosing=!1,r(".century-toolkit-demo-popup-close").fadeOut(),0===a.contentToImport.length)return setTimeout(function(){r(".century-toolkit-loader").hide(),r(".century-toolkit-last").show()},1e3),r.ajax({url:CenturyToolKitDemos.ajaxurl,type:"post",data:{action:"century_toolkit_after_import",century_toolkit_import_demo:a.demo,century_toolkit_import_demo_data_nonce:a.nonce,century_toolkit_import_is_xml:a.isXML},complete:function(t){}}),this.allowPopupClosing=!0,void r(".century-toolkit-demo-popup-close").fadeIn();for(var o in this.importData){var i=r.inArray(this.importData[o].input_name,a.contentToImport);if(-1!==i){t=o,a.contentToImport.splice(i,1),e.action=this.importData[o].action;break}}r(".century-toolkit-import-status").append('<p class="century-toolkit-importing">'+this.importData[t].loader+"</p>");var n=r.ajax({url:CenturyToolKitDemos.ajaxurl,type:"post",data:e,complete:function(t){clearTimeout(s);var e=!0;if(500===t.status||502===t.status||503===t.status)r(".century-toolkit-importing").addClass("century-toolkit-importing-failed").removeClass("century-toolkit-importing").text(CenturyToolKitDemos.content_importing_error+" "+t.status);else if(-1!==t.responseText.indexOf("successful import"))r(".century-toolkit-importing").addClass("century-toolkit-imported").removeClass("century-toolkit-importing");else{var o=r.parseJSON(t.responseText),i="";for(var n in o)i+=o[n],"xml_import_error"===n&&(e=!1);r(".century-toolkit-importing").addClass("century-toolkit-importing-failed").removeClass("century-toolkit-importing").text(i),l.allowPopupClosing=!0,r(".century-toolkit-demo-popup-close").fadeIn()}!0===e&&l.importContent(a)}});s=setTimeout(function(){n.abort(),l.allowPopupClosing=!0,r(".century-toolkit-demo-popup-close").fadeIn(),r(".century-toolkit-importing").addClass("century-toolkit-importing-failed").removeClass("century-toolkit-importing").text(CenturyToolKitDemos.content_importing_error)},9e5)},closePopup:function(){r("html").css({overflow:"","margin-right":""}),r(".preview-icon").hide(),r(".preview-all").hide(),r("#century-toolkit-demo-popup-wrap").fadeOut(),setTimeout(function(){r("#century-toolkit-demo-popup-content").html("")},600)},installNow:function(t){t.preventDefault();var e=r(t.target),o=r(document);e.hasClass("updating-message")||e.hasClass("button-disabled")||(wp.updates.shouldRequestFilesystemCredentials&&!wp.updates.ajaxLocked&&(wp.updates.requestFilesystemCredentials(t),o.on("credential-modal-cancel",function(){r(".install-now.updating-message").removeClass("updating-message").text(wp.updates.l10n.installNow),wp.a11y.speak(wp.updates.l10n.updateCancel,"polite")})),wp.updates.installPlugin({slug:e.data("slug")}))},activatePlugins:function(t){t.preventDefault();var e=r(t.target),o=e.data("init");e.data("slug");e.hasClass("updating-message")||e.hasClass("button-disabled")||(e.addClass("updating-message button-primary").html(CenturyToolKitDemos.button_activating),r.ajax({url:CenturyToolKitDemos.ajaxurl,type:"POST",data:{action:"century_toolkit_ajax_required_plugins_activate",init:o}}).done(function(t){t.success&&e.removeClass("button-primary install-now activate-now updating-message").attr("disabled","disabled").addClass("disabled").text(CenturyToolKitDemos.button_active)}))},installSuccess:function(t,e){t.preventDefault();var o=r(".century-toolkit-plugin-"+e.slug).find(".button"),i=o.data("init");o.removeClass("install-now installed button-disabled updated-message").addClass("updating-message").html(CenturyToolKitDemos.button_activating),setTimeout(function(){r.ajax({url:CenturyToolKitDemos.ajaxurl,type:"POST",data:{action:"century_toolkit_ajax_required_plugins_activate",init:i}}).done(function(t){t.success?o.removeClass("button-primary install-now activate-now updating-message").attr("disabled","disabled").addClass("disabled").text(CenturyToolKitDemos.button_active):o.removeClass("updating-message")})},1200)},pluginInstalling:function(t,e){t.preventDefault(),r(".century-toolkit-plugin-"+e.slug).find(".button").addClass("updating-message")},installError:function(t,e){t.preventDefault(),r(".century-toolkit-plugin-"+e.slug).removeClass("button-primary").addClass("disabled").html(wp.updates.l10n.installFailedShort)}}}(jQuery);